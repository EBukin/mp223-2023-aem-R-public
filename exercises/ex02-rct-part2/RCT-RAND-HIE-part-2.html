<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.251">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="EB">
<meta name="dcterms.date" content="2023-05-02">

<title>Exploratory analysis of the RAND Health Insurance Experiment (HIE) data</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

<script src="../../site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="../../site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">


</head>

<body class="fullcontent">

<div id="quarto-search-results"></div>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Exploratory analysis of the RAND Health Insurance Experiment (HIE) data</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>EB </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">May 2, 2023</p>
    </div>
  </div>
    
  </div>
  

</header>

<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>The RAND Health Insurance Experiment (HIE), which ran from 1974 to 1982, was one of the most influential social experiments in research history. It’s purpose was to evaluate the price elasticity of the health insurance plans. The HIE enrolled 3,958 people aged 14 to 61 from six areas of the USA. The results of this randomized experiment could be used for evaluating the causal effect of the health insurance on peoples health.</p>
<p>Data that we are using in greater details is described in the Chapter 1. Randomized Trials in <a href="https://hds.hebis.de/ubgi/Record/HEB35797798X">Angrist, J. D., &amp; Pischke, J.-S. (2014). Mastering’metrics: The path from cause to effect. Princeton University Press.</a>. For our exercise, we use a somehow simplified data set with only two distinct insurance plans:</p>
<ol type="1">
<li>Catastrophic - Analogy of having no insurance</li>
<li>Free - the most comprehensive insurance plan that allows practically any medical treatment for free.</li>
</ol>
<p>The question that we want to answer is about the causal effect of insurance of enrolled people health.</p>
<blockquote class="blockquote">
<p>Note. To better understand the context, read subsection “Randomized results” of the Chapter 1 in Mastering’metrics.</p>
</blockquote>
<section id="excersise-takaways" class="level3">
<h3 class="anchored" data-anchor-id="excersise-takaways">Excersise takaways:</h3>
<p>These are the key R-related skills showcased in this exercise;</p>
<ol type="1">
<li><p>Data wrangling with:</p>
<ul>
<li><code>dplyr::filter()</code>;</li>
<li><code>dplyr::select()</code>;</li>
</ul></li>
<li><p>Descriptive statistics:</p>
<ul>
<li><code>mean()</code>, <code>sd()</code>;</li>
<li><code>modelsummary::datasummary_skim()</code>;</li>
</ul></li>
<li><p>Means comparison:</p>
<ul>
<li><code>t.test()</code>;</li>
<li><code>modelsummary::datasummary_balance()</code></li>
<li><code>lm()</code> - regression methods</li>
</ul></li>
<li><p>Causal effects analysis:</p>
<ul>
<li><code>t.test()</code>;</li>
<li><code>modelsummary::datasummary_balance()</code></li>
<li><code>lm()</code></li>
</ul></li>
</ol>
</section>
</section>
<section id="loading-packages-and-the-data" class="level2">
<h2 class="anchored" data-anchor-id="loading-packages-and-the-data">Loading packages and the data</h2>
<p>To start working in R, we need to load packages. Sometimes, when we have a fresh new version of R, we need to install libraries before loading them. To install package, one need to run: <code>install.packages("name_of_the_package")</code>.</p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="co"># install.packages("psych")   </span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="fu">library</span>(psych)</span>
<span id="cb1-3"><a href="#cb1-3"></a></span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="co"># install.packages("tidyverse")</span></span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="fu">library</span>(tidyverse)  </span>
<span id="cb1-6"><a href="#cb1-6"></a></span>
<span id="cb1-7"><a href="#cb1-7"></a><span class="co"># install.packages("modelsummary")</span></span>
<span id="cb1-8"><a href="#cb1-8"></a><span class="fu">library</span>(modelsummary)  </span>
<span id="cb1-9"><a href="#cb1-9"></a></span>
<span id="cb1-10"><a href="#cb1-10"></a><span class="co"># install.packages("GGally")</span></span>
<span id="cb1-11"><a href="#cb1-11"></a><span class="fu">library</span>(GGally)  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Loading data</p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>pre_dta <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"rand-hie-pre-treatment.csv"</span>)</span>
<span id="cb2-2"><a href="#cb2-2"></a>post_dta <span class="ot">&lt;-</span>  <span class="fu">read_csv</span>(<span class="st">"rand-hie-post-treatment.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Inspecting data:</p>
<ul>
<li><code>glimpse()</code> at the data in the console.</li>
</ul>
</section>
<section id="wrangling-basics" class="level2">
<h2 class="anchored" data-anchor-id="wrangling-basics">Wrangling basics:</h2>
<p><code>dplyr::filter()</code> - filters observations in the data and <code>dplyr::selects()</code> selects variables.</p>
<p>To learn more, do interactive exercise online here:</p>
<ul>
<li><p><a href="https://posit.cloud/learn/primers/2.1" class="uri">https://posit.cloud/learn/primers/2.1</a></p></li>
<li><p><a href="https://posit.cloud/learn/primers/2.2" class="uri">https://posit.cloud/learn/primers/2.2</a></p></li>
</ul>
<p>Read: <a href="https://r4ds.had.co.nz/transform.html" class="uri">https://r4ds.had.co.nz/transform.html</a></p>
<section id="filtering-data-in-r" class="level3">
<h3 class="anchored" data-anchor-id="filtering-data-in-r">Filtering data in R</h3>
<p>Let us filter one intervention only using <code>dplyr::filter()</code>.</p>
<p><code>?filter</code> - type in the console to get help.</p>
<p>Filter sub samples with a specific insurance plan. Available insurance plans are:</p>
<ul>
<li>“Any insurance”</li>
<li>“Catastrophic”</li>
<li>“Free”</li>
</ul>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>pre_dta <span class="sc">%&gt;%</span> <span class="fu">filter</span>(plan <span class="sc">==</span> <span class="st">"Catastrophic"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 759 × 14
   id       plantype female non_white   age education_years income_family
   &lt;chr&gt;       &lt;dbl&gt;  &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt;           &lt;dbl&gt;         &lt;dbl&gt;
 1 KA100082        4      0         1    42              12        67486.
 2 KA100082        4      0        NA    16              NA        67486.
 3 KA100082        4      1        NA    14              NA        67486.
 4 KA100082        4      1         1    43              12        67486.
 5 KA100634        4      1         1    55              11        55216.
 6 KA100634        4      0         1    59               7        55216.
 7 KA100843        4      0        NA    15              NA        50989.
 8 KA100843        4      0         0    43              12        50989.
 9 KA100843        4      0        NA    14              NA        50989.
10 KA100843        4      1         0    43              12        50989.
# ℹ 749 more rows
# ℹ 7 more variables: hospitalization &lt;dbl&gt;, general_health_index &lt;dbl&gt;,
#   cholesterol &lt;dbl&gt;, blood_pressure &lt;dbl&gt;, mental_health_index &lt;dbl&gt;,
#   plan &lt;chr&gt;, plan_type_2 &lt;dbl&gt;</code></pre>
</div>
</div>
<p>Filter individuals, where total family income is 10 000 or above.</p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>pre_dta <span class="sc">%&gt;%</span> <span class="fu">filter</span>(income_family <span class="sc">&gt;</span>  <span class="dv">10000</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4,391 × 14
   id       plantype female non_white   age education_years income_family
   &lt;chr&gt;       &lt;dbl&gt;  &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt;           &lt;dbl&gt;         &lt;dbl&gt;
 1 KA100082        4      0         1    42              12        67486.
 2 KA100082        4      0        NA    16              NA        67486.
 3 KA100082        4      1        NA    14              NA        67486.
 4 KA100082        4      1         1    43              12        67486.
 5 KA100547        1      1        NA    15              NA        24541.
 6 KA100547        1      1         1    60               9        24541.
 7 KA100547        1      1        NA    14              NA        24541.
 8 KA100547        1      0         1    59               4        24541.
 9 KA100571        1      0        NA    14              NA        34213.
10 KA100571        1      0         1    45               7        34213.
# ℹ 4,381 more rows
# ℹ 7 more variables: hospitalization &lt;dbl&gt;, general_health_index &lt;dbl&gt;,
#   cholesterol &lt;dbl&gt;, blood_pressure &lt;dbl&gt;, mental_health_index &lt;dbl&gt;,
#   plan &lt;chr&gt;, plan_type_2 &lt;dbl&gt;</code></pre>
</div>
</div>
<p>Count the number of individual under each insurance plan with total expenses above 1000.</p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>pre_dta <span class="sc">%&gt;%</span> <span class="fu">filter</span>(income_family <span class="sc">&gt;</span>  <span class="dv">10000</span>) <span class="sc">%&gt;%</span> <span class="fu">count</span>(plan)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  plan              n
  &lt;chr&gt;         &lt;int&gt;
1 Any insurance  2670
2 Catastrophic    628
3 Free           1093</code></pre>
</div>
</div>
</section>
<section id="selecting-data-in-r" class="level3">
<h3 class="anchored" data-anchor-id="selecting-data-in-r">Selecting data in R</h3>
<p>Select any set of variables. For example:</p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a>pre_dta <span class="sc">%&gt;%</span> <span class="fu">select</span>(female, income_family, age, education_years)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5,252 × 4
   female income_family   age education_years
    &lt;dbl&gt;         &lt;dbl&gt; &lt;dbl&gt;           &lt;dbl&gt;
 1      0        67486.    42              12
 2      0        67486.    16              NA
 3      1        67486.    14              NA
 4      1        67486.    43              12
 5      1        24541.    15              NA
 6      1        24541.    60               9
 7      1        24541.    14              NA
 8      0        24541.    59               4
 9      0        34213.    14              NA
10      0        34213.    45               7
# ℹ 5,242 more rows</code></pre>
</div>
</div>
<p>One can specify what variables to drop:</p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a>pre_dta <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>plantype, plan_type_2, <span class="sc">-</span>id, <span class="sc">-</span>general_health_index)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5,252 × 11
   female non_white   age education_years income_family hospitalization
    &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt;           &lt;dbl&gt;         &lt;dbl&gt;           &lt;dbl&gt;
 1      0         1    42              12        67486.               0
 2      0        NA    16              NA        67486.               0
 3      1        NA    14              NA        67486.               0
 4      1         1    43              12        67486.               0
 5      1        NA    15              NA        24541.               0
 6      1         1    60               9        24541.               0
 7      1        NA    14              NA        24541.               0
 8      0         1    59               4        24541.               0
 9      0        NA    14              NA        34213.               1
10      0         1    45               7        34213.               0
# ℹ 5,242 more rows
# ℹ 5 more variables: cholesterol &lt;dbl&gt;, blood_pressure &lt;dbl&gt;,
#   mental_health_index &lt;dbl&gt;, plan &lt;chr&gt;, plan_type_2 &lt;dbl&gt;</code></pre>
</div>
</div>
</section>
<section id="combine-selecting-and-filtering" class="level3">
<h3 class="anchored" data-anchor-id="combine-selecting-and-filtering">Combine selecting and filtering</h3>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a>pre_dta <span class="sc">%&gt;%</span> </span>
<span id="cb13-2"><a href="#cb13-2"></a>  <span class="fu">filter</span>(female <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb13-3"><a href="#cb13-3"></a>  <span class="fu">select</span>(income_family, age, education_years)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,797 × 3
   income_family   age education_years
           &lt;dbl&gt; &lt;dbl&gt;           &lt;dbl&gt;
 1        67486.    14              NA
 2        67486.    43              12
 3        24541.    15              NA
 4        24541.    60               9
 5        24541.    14              NA
 6        34213.    37              12
 7        55216.    55              11
 8        73313.    45              12
 9        50989.    43              12
10        39878.    54              10
# ℹ 2,787 more rows</code></pre>
</div>
</div>
</section>
</section>
<section id="descriptive-statistics" class="level2">
<h2 class="anchored" data-anchor-id="descriptive-statistics">Descriptive statistics</h2>
<p>There are many ways how to make the descriptive statistics. I like <code>datasummary</code></p>
<section id="tables" class="level3">
<h3 class="anchored" data-anchor-id="tables">Tables</h3>
<p>New function: <code>datasummary_skim()</code> from the package <code>modelsummary</code>. Check examples in <code>?datasummary_skim</code>.</p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a><span class="fu">datasummary_skim</span>(pre_dta)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;">   </th>
   <th style="text-align:right;"> Unique (#) </th>
   <th style="text-align:right;"> Missing (%) </th>
   <th style="text-align:right;"> Mean </th>
   <th style="text-align:right;"> SD </th>
   <th style="text-align:right;"> Min </th>
   <th style="text-align:right;"> Median </th>
   <th style="text-align:right;"> Max </th>
   <th style="text-align:right;">    </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> plantype </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 2.0 </td>
   <td style="text-align:right;"> 1.1 </td>
   <td style="text-align:right;"> 1.0 </td>
   <td style="text-align:right;"> 2.0 </td>
   <td style="text-align:right;"> 4.0 </td>
   <td style="text-align:right;">  <svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" class="svglite" width="48.00pt" height="12.00pt" viewbox="0 0 48.00 12.00"><defs><style type="text/css">
    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {
      fill: none;
      stroke: #000000;
      stroke-linecap: round;
      stroke-linejoin: round;
      stroke-miterlimit: 10.00;
    }
    .svglite text {
      white-space: pre;
    }
  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHw0OC4wMHwwLjAwfDEyLjAw"><rect x="0.00" y="0.00" width="48.00" height="12.00"></rect></clippath></defs><g clip-path="url(#cpMC4wMHw0OC4wMHwwLjAwfDEyLjAw)">
</g><defs><clippath id="cpMC4wMHw0OC4wMHwyLjg4fDEyLjAw"><rect x="0.00" y="2.88" width="48.00" height="9.12"></rect></clippath></defs><g clip-path="url(#cpMC4wMHw0OC4wMHwyLjg4fDEyLjAw)"><rect x="1.78" y="3.22" width="2.96" height="8.44" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="4.74" y="11.66" width="2.96" height="0.00" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="7.70" y="11.66" width="2.96" height="0.00" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="10.67" y="11.66" width="2.96" height="0.00" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="13.63" y="8.79" width="2.96" height="2.87" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="16.59" y="11.66" width="2.96" height="0.00" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="19.56" y="11.66" width="2.96" height="0.00" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="22.52" y="11.66" width="2.96" height="0.00" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="25.48" y="11.66" width="2.96" height="0.00" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="28.44" y="8.33" width="2.96" height="3.33" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="31.41" y="11.66" width="2.96" height="0.00" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="34.37" y="11.66" width="2.96" height="0.00" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="37.33" y="11.66" width="2.96" height="0.00" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="40.30" y="11.66" width="2.96" height="0.00" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="43.26" y="9.19" width="2.96" height="2.47" style="stroke-width: 0.38; fill: #000000;"></rect></g></svg>
</td>
  </tr>
  <tr>
   <td style="text-align:left;"> female </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0.5 </td>
   <td style="text-align:right;"> 0.5 </td>
   <td style="text-align:right;"> 0.0 </td>
   <td style="text-align:right;"> 1.0 </td>
   <td style="text-align:right;"> 1.0 </td>
   <td style="text-align:right;">  <svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" class="svglite" width="48.00pt" height="12.00pt" viewbox="0 0 48.00 12.00"><defs><style type="text/css">
    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {
      fill: none;
      stroke: #000000;
      stroke-linecap: round;
      stroke-linejoin: round;
      stroke-miterlimit: 10.00;
    }
    .svglite text {
      white-space: pre;
    }
  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHw0OC4wMHwwLjAwfDEyLjAw"><rect x="0.00" y="0.00" width="48.00" height="12.00"></rect></clippath></defs><g clip-path="url(#cpMC4wMHw0OC4wMHwwLjAwfDEyLjAw)">
</g><defs><clippath id="cpMC4wMHw0OC4wMHwyLjg4fDEyLjAw"><rect x="0.00" y="2.88" width="48.00" height="9.12"></rect></clippath></defs><g clip-path="url(#cpMC4wMHw0OC4wMHwyLjg4fDEyLjAw)"><rect x="1.78" y="4.25" width="4.44" height="7.41" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="6.22" y="11.66" width="4.44" height="0.00" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="10.67" y="11.66" width="4.44" height="0.00" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="15.11" y="11.66" width="4.44" height="0.00" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="19.56" y="11.66" width="4.44" height="0.00" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="24.00" y="11.66" width="4.44" height="0.00" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="28.44" y="11.66" width="4.44" height="0.00" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="32.89" y="11.66" width="4.44" height="0.00" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="37.33" y="11.66" width="4.44" height="0.00" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="41.78" y="3.22" width="4.44" height="8.44" style="stroke-width: 0.38; fill: #000000;"></rect></g></svg>
</td>
  </tr>
  <tr>
   <td style="text-align:left;"> non_white </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 22 </td>
   <td style="text-align:right;"> 0.1 </td>
   <td style="text-align:right;"> 0.4 </td>
   <td style="text-align:right;"> 0.0 </td>
   <td style="text-align:right;"> 0.0 </td>
   <td style="text-align:right;"> 1.0 </td>
   <td style="text-align:right;">  <svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" class="svglite" width="48.00pt" height="12.00pt" viewbox="0 0 48.00 12.00"><defs><style type="text/css">
    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {
      fill: none;
      stroke: #000000;
      stroke-linecap: round;
      stroke-linejoin: round;
      stroke-miterlimit: 10.00;
    }
    .svglite text {
      white-space: pre;
    }
  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHw0OC4wMHwwLjAwfDEyLjAw"><rect x="0.00" y="0.00" width="48.00" height="12.00"></rect></clippath></defs><g clip-path="url(#cpMC4wMHw0OC4wMHwwLjAwfDEyLjAw)">
</g><defs><clippath id="cpMC4wMHw0OC4wMHwyLjg4fDEyLjAw"><rect x="0.00" y="2.88" width="48.00" height="9.12"></rect></clippath></defs><g clip-path="url(#cpMC4wMHw0OC4wMHwyLjg4fDEyLjAw)"><rect x="1.78" y="3.22" width="4.44" height="8.44" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="6.22" y="11.66" width="4.44" height="0.00" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="10.67" y="11.66" width="4.44" height="0.00" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="15.11" y="11.66" width="4.44" height="0.00" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="19.56" y="11.66" width="4.44" height="0.00" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="24.00" y="11.66" width="4.44" height="0.00" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="28.44" y="11.66" width="4.44" height="0.00" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="32.89" y="11.66" width="4.44" height="0.00" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="37.33" y="11.66" width="4.44" height="0.00" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="41.78" y="10.18" width="4.44" height="1.48" style="stroke-width: 0.38; fill: #000000;"></rect></g></svg>
</td>
  </tr>
  <tr>
   <td style="text-align:left;"> age </td>
   <td style="text-align:right;"> 50 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 32.9 </td>
   <td style="text-align:right;"> 13.3 </td>
   <td style="text-align:right;"> 14.0 </td>
   <td style="text-align:right;"> 31.0 </td>
   <td style="text-align:right;"> 62.0 </td>
   <td style="text-align:right;">  <svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" class="svglite" width="48.00pt" height="12.00pt" viewbox="0 0 48.00 12.00"><defs><style type="text/css">
    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {
      fill: none;
      stroke: #000000;
      stroke-linecap: round;
      stroke-linejoin: round;
      stroke-miterlimit: 10.00;
    }
    .svglite text {
      white-space: pre;
    }
  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHw0OC4wMHwwLjAwfDEyLjAw"><rect x="0.00" y="0.00" width="48.00" height="12.00"></rect></clippath></defs><g clip-path="url(#cpMC4wMHw0OC4wMHwwLjAwfDEyLjAw)">
</g><defs><clippath id="cpMC4wMHw0OC4wMHwyLjg4fDEyLjAw"><rect x="0.00" y="2.88" width="48.00" height="9.12"></rect></clippath></defs><g clip-path="url(#cpMC4wMHw0OC4wMHwyLjg4fDEyLjAw)"><rect x="-1.93" y="7.27" width="4.63" height="4.39" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="2.70" y="3.50" width="4.63" height="8.16" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="7.33" y="4.00" width="4.63" height="7.66" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="11.96" y="3.22" width="4.63" height="8.44" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="16.59" y="4.31" width="4.63" height="7.35" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="21.22" y="6.32" width="4.63" height="5.35" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="25.85" y="7.51" width="4.63" height="4.16" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="30.48" y="7.52" width="4.63" height="4.15" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="35.11" y="7.47" width="4.63" height="4.19" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="39.74" y="8.09" width="4.63" height="3.57" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="44.37" y="11.20" width="4.63" height="0.46" style="stroke-width: 0.38; fill: #000000;"></rect></g></svg>
</td>
  </tr>
  <tr>
   <td style="text-align:left;"> education_years </td>
   <td style="text-align:right;"> 31 </td>
   <td style="text-align:right;"> 13 </td>
   <td style="text-align:right;"> 11.9 </td>
   <td style="text-align:right;"> 3.0 </td>
   <td style="text-align:right;"> 0.0 </td>
   <td style="text-align:right;"> 12.0 </td>
   <td style="text-align:right;"> 25.0 </td>
   <td style="text-align:right;">  <svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" class="svglite" width="48.00pt" height="12.00pt" viewbox="0 0 48.00 12.00"><defs><style type="text/css">
    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {
      fill: none;
      stroke: #000000;
      stroke-linecap: round;
      stroke-linejoin: round;
      stroke-miterlimit: 10.00;
    }
    .svglite text {
      white-space: pre;
    }
  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHw0OC4wMHwwLjAwfDEyLjAw"><rect x="0.00" y="0.00" width="48.00" height="12.00"></rect></clippath></defs><g clip-path="url(#cpMC4wMHw0OC4wMHwwLjAwfDEyLjAw)">
</g><defs><clippath id="cpMC4wMHw0OC4wMHwyLjg4fDEyLjAw"><rect x="0.00" y="2.88" width="48.00" height="9.12"></rect></clippath></defs><g clip-path="url(#cpMC4wMHw0OC4wMHwyLjg4fDEyLjAw)"><rect x="1.78" y="11.56" width="3.56" height="0.098" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="5.33" y="11.40" width="3.56" height="0.26" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="8.89" y="11.20" width="3.56" height="0.46" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="12.44" y="10.29" width="3.56" height="1.38" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="16.00" y="8.90" width="3.56" height="2.76" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="19.56" y="3.22" width="3.56" height="8.44" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="23.11" y="8.96" width="3.56" height="2.70" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="26.67" y="9.32" width="3.56" height="2.34" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="30.22" y="10.90" width="3.56" height="0.76" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="33.78" y="11.47" width="3.56" height="0.20" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="37.33" y="11.60" width="3.56" height="0.064" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="40.89" y="11.66" width="3.56" height="0.0042" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="44.44" y="11.65" width="3.56" height="0.0085" style="stroke-width: 0.38; fill: #000000;"></rect></g></svg>
</td>
  </tr>
  <tr>
   <td style="text-align:left;"> income_family </td>
   <td style="text-align:right;"> 1153 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 30964.0 </td>
   <td style="text-align:right;"> 17391.4 </td>
   <td style="text-align:right;"> 0.0 </td>
   <td style="text-align:right;"> 29782.1 </td>
   <td style="text-align:right;"> 89132.2 </td>
   <td style="text-align:right;">  <svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" class="svglite" width="48.00pt" height="12.00pt" viewbox="0 0 48.00 12.00"><defs><style type="text/css">
    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {
      fill: none;
      stroke: #000000;
      stroke-linecap: round;
      stroke-linejoin: round;
      stroke-miterlimit: 10.00;
    }
    .svglite text {
      white-space: pre;
    }
  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHw0OC4wMHwwLjAwfDEyLjAw"><rect x="0.00" y="0.00" width="48.00" height="12.00"></rect></clippath></defs><g clip-path="url(#cpMC4wMHw0OC4wMHwwLjAwfDEyLjAw)">
</g><defs><clippath id="cpMC4wMHw0OC4wMHwyLjg4fDEyLjAw"><rect x="0.00" y="2.88" width="48.00" height="9.12"></rect></clippath></defs><g clip-path="url(#cpMC4wMHw0OC4wMHwyLjg4fDEyLjAw)"><rect x="1.78" y="8.10" width="2.49" height="3.56" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="4.27" y="6.00" width="2.49" height="5.66" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="6.76" y="4.41" width="2.49" height="7.25" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="9.26" y="4.19" width="2.49" height="7.47" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="11.75" y="3.50" width="2.49" height="8.16" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="14.24" y="3.22" width="2.49" height="8.44" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="16.74" y="4.00" width="2.49" height="7.67" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="19.23" y="3.66" width="2.49" height="8.00" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="21.72" y="5.83" width="2.49" height="5.84" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="24.22" y="6.26" width="2.49" height="5.41" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="26.71" y="8.40" width="2.49" height="3.26" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="29.20" y="8.18" width="2.49" height="3.48" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="31.70" y="9.71" width="2.49" height="1.96" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="34.19" y="10.23" width="2.49" height="1.43" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="36.68" y="10.69" width="2.49" height="0.97" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="39.18" y="11.23" width="2.49" height="0.43" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="41.67" y="11.66" width="2.49" height="0.00" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="44.16" y="11.60" width="2.49" height="0.064" style="stroke-width: 0.38; fill: #000000;"></rect></g></svg>
</td>
  </tr>
  <tr>
   <td style="text-align:left;"> hospitalization </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0.1 </td>
   <td style="text-align:right;"> 0.3 </td>
   <td style="text-align:right;"> 0.0 </td>
   <td style="text-align:right;"> 0.0 </td>
   <td style="text-align:right;"> 1.0 </td>
   <td style="text-align:right;">  <svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" class="svglite" width="48.00pt" height="12.00pt" viewbox="0 0 48.00 12.00"><defs><style type="text/css">
    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {
      fill: none;
      stroke: #000000;
      stroke-linecap: round;
      stroke-linejoin: round;
      stroke-miterlimit: 10.00;
    }
    .svglite text {
      white-space: pre;
    }
  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHw0OC4wMHwwLjAwfDEyLjAw"><rect x="0.00" y="0.00" width="48.00" height="12.00"></rect></clippath></defs><g clip-path="url(#cpMC4wMHw0OC4wMHwwLjAwfDEyLjAw)">
</g><defs><clippath id="cpMC4wMHw0OC4wMHwyLjg4fDEyLjAw"><rect x="0.00" y="2.88" width="48.00" height="9.12"></rect></clippath></defs><g clip-path="url(#cpMC4wMHw0OC4wMHwyLjg4fDEyLjAw)"><rect x="1.78" y="3.22" width="4.44" height="8.44" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="6.22" y="11.66" width="4.44" height="0.00" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="10.67" y="11.66" width="4.44" height="0.00" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="15.11" y="11.66" width="4.44" height="0.00" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="19.56" y="11.66" width="4.44" height="0.00" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="24.00" y="11.66" width="4.44" height="0.00" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="28.44" y="11.66" width="4.44" height="0.00" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="32.89" y="11.66" width="4.44" height="0.00" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="37.33" y="11.66" width="4.44" height="0.00" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="41.78" y="10.55" width="4.44" height="1.11" style="stroke-width: 0.38; fill: #000000;"></rect></g></svg>
</td>
  </tr>
  <tr>
   <td style="text-align:left;"> general_health_index </td>
   <td style="text-align:right;"> 145 </td>
   <td style="text-align:right;"> 22 </td>
   <td style="text-align:right;"> 70.0 </td>
   <td style="text-align:right;"> 15.0 </td>
   <td style="text-align:right;"> 5.7 </td>
   <td style="text-align:right;"> 71.6 </td>
   <td style="text-align:right;"> 100.0 </td>
   <td style="text-align:right;">  <svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" class="svglite" width="48.00pt" height="12.00pt" viewbox="0 0 48.00 12.00"><defs><style type="text/css">
    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {
      fill: none;
      stroke: #000000;
      stroke-linecap: round;
      stroke-linejoin: round;
      stroke-miterlimit: 10.00;
    }
    .svglite text {
      white-space: pre;
    }
  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHw0OC4wMHwwLjAwfDEyLjAw"><rect x="0.00" y="0.00" width="48.00" height="12.00"></rect></clippath></defs><g clip-path="url(#cpMC4wMHw0OC4wMHwwLjAwfDEyLjAw)">
</g><defs><clippath id="cpMC4wMHw0OC4wMHwyLjg4fDEyLjAw"><rect x="0.00" y="2.88" width="48.00" height="9.12"></rect></clippath></defs><g clip-path="url(#cpMC4wMHw0OC4wMHwyLjg4fDEyLjAw)"><rect x="-0.91" y="11.65" width="4.71" height="0.0073" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="3.80" y="11.57" width="4.71" height="0.088" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="8.52" y="11.34" width="4.71" height="0.32" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="13.23" y="10.88" width="4.71" height="0.78" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="17.94" y="9.80" width="4.71" height="1.86" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="22.66" y="7.88" width="4.71" height="3.78" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="27.37" y="4.82" width="4.71" height="6.84" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="32.08" y="3.22" width="4.71" height="8.44" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="36.80" y="6.14" width="4.71" height="5.53" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="41.51" y="9.38" width="4.71" height="2.29" style="stroke-width: 0.38; fill: #000000;"></rect></g></svg>
</td>
  </tr>
  <tr>
   <td style="text-align:left;"> cholesterol </td>
   <td style="text-align:right;"> 227 </td>
   <td style="text-align:right;"> 42 </td>
   <td style="text-align:right;"> 204.0 </td>
   <td style="text-align:right;"> 43.2 </td>
   <td style="text-align:right;"> 51.0 </td>
   <td style="text-align:right;"> 200.0 </td>
   <td style="text-align:right;"> 435.0 </td>
   <td style="text-align:right;">  <svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" class="svglite" width="48.00pt" height="12.00pt" viewbox="0 0 48.00 12.00"><defs><style type="text/css">
    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {
      fill: none;
      stroke: #000000;
      stroke-linecap: round;
      stroke-linejoin: round;
      stroke-miterlimit: 10.00;
    }
    .svglite text {
      white-space: pre;
    }
  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHw0OC4wMHwwLjAwfDEyLjAw"><rect x="0.00" y="0.00" width="48.00" height="12.00"></rect></clippath></defs><g clip-path="url(#cpMC4wMHw0OC4wMHwwLjAwfDEyLjAw)">
</g><defs><clippath id="cpMC4wMHw0OC4wMHwyLjg4fDEyLjAw"><rect x="0.00" y="2.88" width="48.00" height="9.12"></rect></clippath></defs><g clip-path="url(#cpMC4wMHw0OC4wMHwyLjg4fDEyLjAw)"><rect x="1.66" y="11.65" width="5.79" height="0.013" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="7.45" y="9.86" width="5.79" height="1.80" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="13.24" y="3.22" width="5.79" height="8.44" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="19.02" y="4.70" width="5.79" height="6.96" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="24.81" y="9.42" width="5.79" height="2.24" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="30.60" y="11.20" width="5.79" height="0.46" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="36.38" y="11.60" width="5.79" height="0.059" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="42.17" y="11.66" width="5.79" height="0.0066" style="stroke-width: 0.38; fill: #000000;"></rect></g></svg>
</td>
  </tr>
  <tr>
   <td style="text-align:left;"> blood_pressure </td>
   <td style="text-align:right;"> 101 </td>
   <td style="text-align:right;"> 41 </td>
   <td style="text-align:right;"> 123.5 </td>
   <td style="text-align:right;"> 16.5 </td>
   <td style="text-align:right;"> 82.0 </td>
   <td style="text-align:right;"> 122.0 </td>
   <td style="text-align:right;"> 230.0 </td>
   <td style="text-align:right;">  <svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" class="svglite" width="48.00pt" height="12.00pt" viewbox="0 0 48.00 12.00"><defs><style type="text/css">
    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {
      fill: none;
      stroke: #000000;
      stroke-linecap: round;
      stroke-linejoin: round;
      stroke-miterlimit: 10.00;
    }
    .svglite text {
      white-space: pre;
    }
  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHw0OC4wMHwwLjAwfDEyLjAw"><rect x="0.00" y="0.00" width="48.00" height="12.00"></rect></clippath></defs><g clip-path="url(#cpMC4wMHw0OC4wMHwwLjAwfDEyLjAw)">
</g><defs><clippath id="cpMC4wMHw0OC4wMHwyLjg4fDEyLjAw"><rect x="0.00" y="2.88" width="48.00" height="9.12"></rect></clippath></defs><g clip-path="url(#cpMC4wMHw0OC4wMHwyLjg4fDEyLjAw)"><rect x="1.18" y="11.24" width="3.00" height="0.43" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="4.18" y="9.96" width="3.00" height="1.70" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="7.18" y="6.53" width="3.00" height="5.13" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="10.19" y="3.59" width="3.00" height="8.07" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="13.19" y="3.22" width="3.00" height="8.44" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="16.19" y="5.77" width="3.00" height="5.89" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="19.20" y="9.74" width="3.00" height="1.92" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="22.20" y="10.55" width="3.00" height="1.11" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="25.20" y="11.20" width="3.00" height="0.46" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="28.20" y="11.37" width="3.00" height="0.29" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="31.21" y="11.59" width="3.00" height="0.076" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="34.21" y="11.65" width="3.00" height="0.011" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="37.21" y="11.65" width="3.00" height="0.011" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="40.22" y="11.66" width="3.00" height="0.00" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="43.22" y="11.64" width="3.00" height="0.022" style="stroke-width: 0.38; fill: #000000;"></rect></g></svg>
</td>
  </tr>
  <tr>
   <td style="text-align:left;"> mental_health_index </td>
   <td style="text-align:right;"> 279 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 74.5 </td>
   <td style="text-align:right;"> 13.9 </td>
   <td style="text-align:right;"> 12.2 </td>
   <td style="text-align:right;"> 77.1 </td>
   <td style="text-align:right;"> 100.0 </td>
   <td style="text-align:right;">  <svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" class="svglite" width="48.00pt" height="12.00pt" viewbox="0 0 48.00 12.00"><defs><style type="text/css">
    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {
      fill: none;
      stroke: #000000;
      stroke-linecap: round;
      stroke-linejoin: round;
      stroke-miterlimit: 10.00;
    }
    .svglite text {
      white-space: pre;
    }
  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHw0OC4wMHwwLjAwfDEyLjAw"><rect x="0.00" y="0.00" width="48.00" height="12.00"></rect></clippath></defs><g clip-path="url(#cpMC4wMHw0OC4wMHwwLjAwfDEyLjAw)">
</g><defs><clippath id="cpMC4wMHw0OC4wMHwyLjg4fDEyLjAw"><rect x="0.00" y="2.88" width="48.00" height="9.12"></rect></clippath></defs><g clip-path="url(#cpMC4wMHw0OC4wMHwyLjg4fDEyLjAw)"><rect x="0.66" y="11.64" width="2.53" height="0.020" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="3.20" y="11.63" width="2.53" height="0.030" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="5.73" y="11.50" width="2.53" height="0.16" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="8.26" y="11.46" width="2.53" height="0.20" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="10.79" y="11.46" width="2.53" height="0.20" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="13.32" y="11.15" width="2.53" height="0.52" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="15.85" y="10.69" width="2.53" height="0.97" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="18.38" y="10.62" width="2.53" height="1.04" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="20.91" y="10.22" width="2.53" height="1.44" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="23.44" y="8.74" width="2.53" height="2.93" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="25.97" y="7.39" width="2.53" height="4.27" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="28.51" y="7.58" width="2.53" height="4.08" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="31.04" y="4.78" width="2.53" height="6.89" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="33.57" y="3.22" width="2.53" height="8.44" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="36.10" y="3.81" width="2.53" height="7.86" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="38.63" y="4.51" width="2.53" height="7.15" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="41.16" y="7.80" width="2.53" height="3.86" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="43.69" y="10.47" width="2.53" height="1.19" style="stroke-width: 0.38; fill: #000000;"></rect></g></svg>
</td>
  </tr>
  <tr>
   <td style="text-align:left;"> plan_type_2 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1.1 </td>
   <td style="text-align:right;"> 0.6 </td>
   <td style="text-align:right;"> 0.0 </td>
   <td style="text-align:right;"> 1.0 </td>
   <td style="text-align:right;"> 2.0 </td>
   <td style="text-align:right;">  <svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" class="svglite" width="48.00pt" height="12.00pt" viewbox="0 0 48.00 12.00"><defs><style type="text/css">
    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {
      fill: none;
      stroke: #000000;
      stroke-linecap: round;
      stroke-linejoin: round;
      stroke-miterlimit: 10.00;
    }
    .svglite text {
      white-space: pre;
    }
  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHw0OC4wMHwwLjAwfDEyLjAw"><rect x="0.00" y="0.00" width="48.00" height="12.00"></rect></clippath></defs><g clip-path="url(#cpMC4wMHw0OC4wMHwwLjAwfDEyLjAw)">
</g><defs><clippath id="cpMC4wMHw0OC4wMHwyLjg4fDEyLjAw"><rect x="0.00" y="2.88" width="48.00" height="9.12"></rect></clippath></defs><g clip-path="url(#cpMC4wMHw0OC4wMHwyLjg4fDEyLjAw)"><rect x="1.78" y="9.66" width="4.44" height="2.00" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="6.22" y="11.66" width="4.44" height="0.00" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="10.67" y="11.66" width="4.44" height="0.00" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="15.11" y="11.66" width="4.44" height="0.00" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="19.56" y="3.22" width="4.44" height="8.44" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="24.00" y="11.66" width="4.44" height="0.00" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="28.44" y="11.66" width="4.44" height="0.00" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="32.89" y="11.66" width="4.44" height="0.00" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="37.33" y="11.66" width="4.44" height="0.00" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="41.78" y="8.24" width="4.44" height="3.42" style="stroke-width: 0.38; fill: #000000;"></rect></g></svg>
</td>
  </tr>
</tbody>
</table>

</div>
</div>
<p>Use <code>filter()</code>, <code>select()</code> and <code>datasummary_skim()</code> to build summary statistics for each insurance plan in the pre-treatment data. Compare those results with the Table 1.3 in the Mastering’metrics book. Make sure that variables <code>plantype</code>, <code>plan_type_2</code> are not in the summary statistics.</p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a>pre_dta <span class="sc">%&gt;%</span> </span>
<span id="cb16-2"><a href="#cb16-2"></a>  <span class="fu">filter</span>(plan <span class="sc">==</span> <span class="st">"Catastrophic"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb16-3"><a href="#cb16-3"></a>  <span class="fu">select</span>(female, age, education_years) <span class="sc">%&gt;%</span> </span>
<span id="cb16-4"><a href="#cb16-4"></a>  <span class="fu">datasummary_skim</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;">   </th>
   <th style="text-align:right;"> Unique (#) </th>
   <th style="text-align:right;"> Missing (%) </th>
   <th style="text-align:right;"> Mean </th>
   <th style="text-align:right;"> SD </th>
   <th style="text-align:right;"> Min </th>
   <th style="text-align:right;"> Median </th>
   <th style="text-align:right;"> Max </th>
   <th style="text-align:right;">    </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> female </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0.6 </td>
   <td style="text-align:right;"> 0.5 </td>
   <td style="text-align:right;"> 0.0 </td>
   <td style="text-align:right;"> 1.0 </td>
   <td style="text-align:right;"> 1.0 </td>
   <td style="text-align:right;">  <svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" class="svglite" width="48.00pt" height="12.00pt" viewbox="0 0 48.00 12.00"><defs><style type="text/css">
    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {
      fill: none;
      stroke: #000000;
      stroke-linecap: round;
      stroke-linejoin: round;
      stroke-miterlimit: 10.00;
    }
    .svglite text {
      white-space: pre;
    }
  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHw0OC4wMHwwLjAwfDEyLjAw"><rect x="0.00" y="0.00" width="48.00" height="12.00"></rect></clippath></defs><g clip-path="url(#cpMC4wMHw0OC4wMHwwLjAwfDEyLjAw)">
</g><defs><clippath id="cpMC4wMHw0OC4wMHwyLjg4fDEyLjAw"><rect x="0.00" y="2.88" width="48.00" height="9.12"></rect></clippath></defs><g clip-path="url(#cpMC4wMHw0OC4wMHwyLjg4fDEyLjAw)"><rect x="1.78" y="5.03" width="4.44" height="6.64" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="6.22" y="11.66" width="4.44" height="0.00" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="10.67" y="11.66" width="4.44" height="0.00" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="15.11" y="11.66" width="4.44" height="0.00" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="19.56" y="11.66" width="4.44" height="0.00" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="24.00" y="11.66" width="4.44" height="0.00" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="28.44" y="11.66" width="4.44" height="0.00" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="32.89" y="11.66" width="4.44" height="0.00" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="37.33" y="11.66" width="4.44" height="0.00" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="41.78" y="3.22" width="4.44" height="8.44" style="stroke-width: 0.38; fill: #000000;"></rect></g></svg>
</td>
  </tr>
  <tr>
   <td style="text-align:left;"> age </td>
   <td style="text-align:right;"> 49 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 32.4 </td>
   <td style="text-align:right;"> 12.9 </td>
   <td style="text-align:right;"> 14.0 </td>
   <td style="text-align:right;"> 30.0 </td>
   <td style="text-align:right;"> 62.0 </td>
   <td style="text-align:right;">  <svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" class="svglite" width="48.00pt" height="12.00pt" viewbox="0 0 48.00 12.00"><defs><style type="text/css">
    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {
      fill: none;
      stroke: #000000;
      stroke-linecap: round;
      stroke-linejoin: round;
      stroke-miterlimit: 10.00;
    }
    .svglite text {
      white-space: pre;
    }
  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHw0OC4wMHwwLjAwfDEyLjAw"><rect x="0.00" y="0.00" width="48.00" height="12.00"></rect></clippath></defs><g clip-path="url(#cpMC4wMHw0OC4wMHwwLjAwfDEyLjAw)">
</g><defs><clippath id="cpMC4wMHw0OC4wMHwyLjg4fDEyLjAw"><rect x="0.00" y="2.88" width="48.00" height="9.12"></rect></clippath></defs><g clip-path="url(#cpMC4wMHw0OC4wMHwyLjg4fDEyLjAw)"><rect x="-1.93" y="7.61" width="4.63" height="4.05" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="2.70" y="4.45" width="4.63" height="7.21" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="7.33" y="4.66" width="4.63" height="7.00" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="11.96" y="3.22" width="4.63" height="8.44" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="16.59" y="5.07" width="4.63" height="6.59" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="21.22" y="7.27" width="4.63" height="4.39" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="25.85" y="7.82" width="4.63" height="3.84" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="30.48" y="7.75" width="4.63" height="3.91" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="35.11" y="7.82" width="4.63" height="3.84" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="39.74" y="9.12" width="4.63" height="2.54" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="44.37" y="11.39" width="4.63" height="0.27" style="stroke-width: 0.38; fill: #000000;"></rect></g></svg>
</td>
  </tr>
  <tr>
   <td style="text-align:left;"> education_years </td>
   <td style="text-align:right;"> 25 </td>
   <td style="text-align:right;"> 13 </td>
   <td style="text-align:right;"> 12.1 </td>
   <td style="text-align:right;"> 2.9 </td>
   <td style="text-align:right;"> 1.0 </td>
   <td style="text-align:right;"> 12.0 </td>
   <td style="text-align:right;"> 22.0 </td>
   <td style="text-align:right;">  <svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" class="svglite" width="48.00pt" height="12.00pt" viewbox="0 0 48.00 12.00"><defs><style type="text/css">
    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {
      fill: none;
      stroke: #000000;
      stroke-linecap: round;
      stroke-linejoin: round;
      stroke-miterlimit: 10.00;
    }
    .svglite text {
      white-space: pre;
    }
  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHw0OC4wMHwwLjAwfDEyLjAw"><rect x="0.00" y="0.00" width="48.00" height="12.00"></rect></clippath></defs><g clip-path="url(#cpMC4wMHw0OC4wMHwwLjAwfDEyLjAw)">
</g><defs><clippath id="cpMC4wMHw0OC4wMHwyLjg4fDEyLjAw"><rect x="0.00" y="2.88" width="48.00" height="9.12"></rect></clippath></defs><g clip-path="url(#cpMC4wMHw0OC4wMHwyLjg4fDEyLjAw)"><rect x="-0.34" y="11.63" width="4.23" height="0.030" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="3.89" y="11.57" width="4.23" height="0.090" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="8.13" y="11.21" width="4.23" height="0.45" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="12.36" y="10.12" width="4.23" height="1.54" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="16.59" y="8.92" width="4.23" height="2.74" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="20.83" y="3.22" width="4.23" height="8.44" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="25.06" y="8.77" width="4.23" height="2.90" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="29.29" y="8.89" width="4.23" height="2.77" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="33.52" y="10.91" width="4.23" height="0.75" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="37.76" y="11.45" width="4.23" height="0.21" style="stroke-width: 0.38; fill: #000000;"></rect><rect x="41.99" y="11.60" width="4.23" height="0.060" style="stroke-width: 0.38; fill: #000000;"></rect></g></svg>
</td>
  </tr>
</tbody>
</table>

</div>
</div>
</section>
<section id="complex-data-summary-tables" class="level3">
<h3 class="anchored" data-anchor-id="complex-data-summary-tables">Complex data summary tables</h3>
<p>Step 1. Create functions that make summary statistics for us.</p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a>mean_na <span class="ot">&lt;-</span> <span class="cf">function</span>(x) <span class="fu">mean</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb17-2"><a href="#cb17-2"></a></span>
<span id="cb17-3"><a href="#cb17-3"></a>sd_na <span class="ot">&lt;-</span> <span class="cf">function</span>(x) <span class="fu">sd</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb17-4"><a href="#cb17-4"></a></span>
<span id="cb17-5"><a href="#cb17-5"></a>min_max <span class="ot">&lt;-</span></span>
<span id="cb17-6"><a href="#cb17-6"></a>  <span class="cf">function</span>(x)  {</span>
<span id="cb17-7"><a href="#cb17-7"></a>    <span class="fu">sprintf</span>(<span class="st">"[%.1f, %.1f]"</span>, <span class="fu">min</span>(x, <span class="at">na.rm =</span> T), <span class="fu">max</span>(x, <span class="at">na.rm =</span> T))</span>
<span id="cb17-8"><a href="#cb17-8"></a>  }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Step 2. Check how these functions work:</p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a><span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">120</span>) <span class="sc">%&gt;%</span> mean_na</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 60.5</code></pre>
</div>
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a>pre_dta<span class="sc">$</span>age <span class="sc">%&gt;%</span> sd_na</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 13.27277</code></pre>
</div>
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a>pre_dta<span class="sc">$</span>income_family <span class="sc">%&gt;%</span> min_max</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "[0.0, 89132.2]"</code></pre>
</div>
</div>
<p>Step 3. Construct a complex summary statistic table using:</p>
<ul>
<li><code>datasummary()</code>. help: <code>?datasummary</code>. Check the examples.</li>
</ul>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a><span class="fu">datasummary</span>(<span class="fu">All</span>(pre_dta) <span class="sc">~</span> plan <span class="sc">*</span> (mean_na <span class="sc">+</span> sd_na <span class="sc">+</span> min_max), <span class="at">data =</span> pre_dta)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
<tr>
<th style="empty-cells: hide;border-bottom:hidden;" colspan="1"></th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="3"><div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">Any insurance</div></th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="3"><div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">Catastrophic</div></th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="3"><div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">Free</div></th>
</tr>
  <tr>
   <th style="text-align:left;">   </th>
   <th style="text-align:right;"> mean_na </th>
   <th style="text-align:right;"> sd_na </th>
   <th style="text-align:right;"> min_max </th>
   <th style="text-align:right;"> mean_na </th>
   <th style="text-align:right;"> sd_na </th>
   <th style="text-align:right;"> min_max </th>
   <th style="text-align:right;"> mean_na </th>
   <th style="text-align:right;"> sd_na </th>
   <th style="text-align:right;"> min_max </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> plantype </td>
   <td style="text-align:right;"> 1.91 </td>
   <td style="text-align:right;"> 0.85 </td>
   <td style="text-align:right;"> [1.0, 3.0] </td>
   <td style="text-align:right;"> 4.00 </td>
   <td style="text-align:right;"> 0.00 </td>
   <td style="text-align:right;"> [4.0, 4.0] </td>
   <td style="text-align:right;"> 1.00 </td>
   <td style="text-align:right;"> 0.00 </td>
   <td style="text-align:right;"> [1.0, 1.0] </td>
  </tr>
  <tr>
   <td style="text-align:left;"> female </td>
   <td style="text-align:right;"> 0.53 </td>
   <td style="text-align:right;"> 0.50 </td>
   <td style="text-align:right;"> [0.0, 1.0] </td>
   <td style="text-align:right;"> 0.56 </td>
   <td style="text-align:right;"> 0.50 </td>
   <td style="text-align:right;"> [0.0, 1.0] </td>
   <td style="text-align:right;"> 0.52 </td>
   <td style="text-align:right;"> 0.50 </td>
   <td style="text-align:right;"> [0.0, 1.0] </td>
  </tr>
  <tr>
   <td style="text-align:left;"> non_white </td>
   <td style="text-align:right;"> 0.15 </td>
   <td style="text-align:right;"> 0.35 </td>
   <td style="text-align:right;"> [0.0, 1.0] </td>
   <td style="text-align:right;"> 0.17 </td>
   <td style="text-align:right;"> 0.38 </td>
   <td style="text-align:right;"> [0.0, 1.0] </td>
   <td style="text-align:right;"> 0.14 </td>
   <td style="text-align:right;"> 0.35 </td>
   <td style="text-align:right;"> [0.0, 1.0] </td>
  </tr>
  <tr>
   <td style="text-align:left;"> age </td>
   <td style="text-align:right;"> 33.00 </td>
   <td style="text-align:right;"> 13.26 </td>
   <td style="text-align:right;"> [14.0, 62.0] </td>
   <td style="text-align:right;"> 32.36 </td>
   <td style="text-align:right;"> 12.92 </td>
   <td style="text-align:right;"> [14.0, 62.0] </td>
   <td style="text-align:right;"> 32.80 </td>
   <td style="text-align:right;"> 13.50 </td>
   <td style="text-align:right;"> [14.0, 62.0] </td>
  </tr>
  <tr>
   <td style="text-align:left;"> education_years </td>
   <td style="text-align:right;"> 11.94 </td>
   <td style="text-align:right;"> 3.01 </td>
   <td style="text-align:right;"> [0.0, 25.0] </td>
   <td style="text-align:right;"> 12.10 </td>
   <td style="text-align:right;"> 2.88 </td>
   <td style="text-align:right;"> [1.0, 22.0] </td>
   <td style="text-align:right;"> 11.84 </td>
   <td style="text-align:right;"> 3.12 </td>
   <td style="text-align:right;"> [0.0, 25.0] </td>
  </tr>
  <tr>
   <td style="text-align:left;"> income_family </td>
   <td style="text-align:right;"> 30949.58 </td>
   <td style="text-align:right;"> 17286.80 </td>
   <td style="text-align:right;"> [0.0, 79756.8] </td>
   <td style="text-align:right;"> 31603.21 </td>
   <td style="text-align:right;"> 18148.25 </td>
   <td style="text-align:right;"> [0.0, 89132.2] </td>
   <td style="text-align:right;"> 30627.02 </td>
   <td style="text-align:right;"> 17201.13 </td>
   <td style="text-align:right;"> [0.0, 79756.8] </td>
  </tr>
  <tr>
   <td style="text-align:left;"> hospitalization </td>
   <td style="text-align:right;"> 0.12 </td>
   <td style="text-align:right;"> 0.32 </td>
   <td style="text-align:right;"> [0.0, 1.0] </td>
   <td style="text-align:right;"> 0.12 </td>
   <td style="text-align:right;"> 0.32 </td>
   <td style="text-align:right;"> [0.0, 1.0] </td>
   <td style="text-align:right;"> 0.12 </td>
   <td style="text-align:right;"> 0.32 </td>
   <td style="text-align:right;"> [0.0, 1.0] </td>
  </tr>
  <tr>
   <td style="text-align:left;"> general_health_index </td>
   <td style="text-align:right;"> 69.93 </td>
   <td style="text-align:right;"> 15.03 </td>
   <td style="text-align:right;"> [10.2, 100.0] </td>
   <td style="text-align:right;"> 70.86 </td>
   <td style="text-align:right;"> 14.91 </td>
   <td style="text-align:right;"> [5.7, 100.0] </td>
   <td style="text-align:right;"> 69.55 </td>
   <td style="text-align:right;"> 15.03 </td>
   <td style="text-align:right;"> [14.8, 100.0] </td>
  </tr>
  <tr>
   <td style="text-align:left;"> cholesterol </td>
   <td style="text-align:right;"> 204.11 </td>
   <td style="text-align:right;"> 43.54 </td>
   <td style="text-align:right;"> [51.0, 435.0] </td>
   <td style="text-align:right;"> 207.30 </td>
   <td style="text-align:right;"> 39.92 </td>
   <td style="text-align:right;"> [113.0, 380.0] </td>
   <td style="text-align:right;"> 202.06 </td>
   <td style="text-align:right;"> 44.22 </td>
   <td style="text-align:right;"> [51.0, 370.0] </td>
  </tr>
  <tr>
   <td style="text-align:left;"> blood_pressure </td>
   <td style="text-align:right;"> 123.73 </td>
   <td style="text-align:right;"> 16.60 </td>
   <td style="text-align:right;"> [82.0, 230.0] </td>
   <td style="text-align:right;"> 122.34 </td>
   <td style="text-align:right;"> 16.48 </td>
   <td style="text-align:right;"> [86.0, 182.0] </td>
   <td style="text-align:right;"> 123.47 </td>
   <td style="text-align:right;"> 16.25 </td>
   <td style="text-align:right;"> [82.0, 230.0] </td>
  </tr>
  <tr>
   <td style="text-align:left;"> mental_health_index </td>
   <td style="text-align:right;"> 74.55 </td>
   <td style="text-align:right;"> 13.76 </td>
   <td style="text-align:right;"> [12.2, 100.0] </td>
   <td style="text-align:right;"> 73.85 </td>
   <td style="text-align:right;"> 14.25 </td>
   <td style="text-align:right;"> [24.5, 99.5] </td>
   <td style="text-align:right;"> 74.74 </td>
   <td style="text-align:right;"> 13.90 </td>
   <td style="text-align:right;"> [12.2, 100.0] </td>
  </tr>
  <tr>
   <td style="text-align:left;"> plan_type_2 </td>
   <td style="text-align:right;"> 1.00 </td>
   <td style="text-align:right;"> 0.00 </td>
   <td style="text-align:right;"> [1.0, 1.0] </td>
   <td style="text-align:right;"> 0.00 </td>
   <td style="text-align:right;"> 0.00 </td>
   <td style="text-align:right;"> [0.0, 0.0] </td>
   <td style="text-align:right;"> 2.00 </td>
   <td style="text-align:right;"> 0.00 </td>
   <td style="text-align:right;"> [2.0, 2.0] </td>
  </tr>
</tbody>
</table>

</div>
</div>
</section>
<section id="visual-summary-statistics" class="level3">
<h3 class="anchored" data-anchor-id="visual-summary-statistics">Visual summary statistics</h3>
<p>Here we can use <code>GGally::ggpair()</code> more information is here: <a href="https://ggobi.github.io/ggally/articles/ggpairs.html" class="uri">https://ggobi.github.io/ggally/articles/ggpairs.html</a></p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a>pre_dta <span class="sc">%&gt;%</span> </span>
<span id="cb25-2"><a href="#cb25-2"></a>  <span class="fu">select</span>(plan, age, education_years, mental_health_index) <span class="sc">%&gt;%</span> </span>
<span id="cb25-3"><a href="#cb25-3"></a>  GGally<span class="sc">::</span><span class="fu">ggpairs</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">fill =</span> plan)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="RCT-RAND-HIE-part-2_files/figure-revealjs/unnamed-chunk-14-1.png" class="img-fluid" width="960"></p>
</div>
</div>
</section>
</section>
<section id="checks-and-balances" class="level2">
<h2 class="anchored" data-anchor-id="checks-and-balances">Checks and balances</h2>
<section id="means-differences-between-groups" class="level3">
<h3 class="anchored" data-anchor-id="means-differences-between-groups">Means differences between groups</h3>
<p>We can perform means comparison tests one by one for each variable and difference. For example:</p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1"></a><span class="fu">t.test</span>(income_family <span class="sc">~</span> plan, <span class="at">data =</span> pre_dta <span class="sc">%&gt;%</span> <span class="fu">filter</span>(plan_type_2 <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
    Welch Two Sample t-test

data:  income_family by plan
t = 0.55359, df = 2285.9, p-value = 0.5799
alternative hypothesis: true difference in means between group Any insurance and group Free is not equal to 0
95 percent confidence interval:
 -820.0562 1465.1735
sample estimates:
mean in group Any insurance          mean in group Free 
                   30949.58                    30627.02 </code></pre>
</div>
</div>
<p>Make a similar comparison for a different plan type:</p>
<div class="cell">

</div>
<p>Make a similar comparison for a different outcome variable:</p>
<div class="cell">

</div>
</section>
<section id="checks-and-balances-tables" class="level3">
<h3 class="anchored" data-anchor-id="checks-and-balances-tables">Checks and balances tables</h3>
<p><code>datasummary_balance()</code> is a more sophisticated function. It builds summary statistics for multiple groups and for two groups only it permits comparing means. For help, see <code>?datasummary_balance</code>.</p>
<p>Compare leans for all variables across all insurances.</p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1"></a><span class="fu">datasummary_balance</span>(. <span class="sc">~</span> plan, <span class="at">data =</span> pre_dta)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
<tr>
<th style="empty-cells: hide;border-bottom:hidden;" colspan="1"></th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2"><div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">Any insurance (N=3198)</div></th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2"><div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">Catastrophic (N=759)</div></th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2"><div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">Free (N=1295)</div></th>
</tr>
  <tr>
   <th style="text-align:left;">   </th>
   <th style="text-align:right;"> Mean </th>
   <th style="text-align:right;"> Std. Dev. </th>
   <th style="text-align:right;"> Mean </th>
   <th style="text-align:right;"> Std. Dev. </th>
   <th style="text-align:right;"> Mean </th>
   <th style="text-align:right;"> Std. Dev. </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> plantype </td>
   <td style="text-align:right;"> 1.9 </td>
   <td style="text-align:right;"> 0.8 </td>
   <td style="text-align:right;"> 4.0 </td>
   <td style="text-align:right;"> 0.0 </td>
   <td style="text-align:right;"> 1.0 </td>
   <td style="text-align:right;"> 0.0 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> female </td>
   <td style="text-align:right;"> 0.5 </td>
   <td style="text-align:right;"> 0.5 </td>
   <td style="text-align:right;"> 0.6 </td>
   <td style="text-align:right;"> 0.5 </td>
   <td style="text-align:right;"> 0.5 </td>
   <td style="text-align:right;"> 0.5 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> non_white </td>
   <td style="text-align:right;"> 0.1 </td>
   <td style="text-align:right;"> 0.4 </td>
   <td style="text-align:right;"> 0.2 </td>
   <td style="text-align:right;"> 0.4 </td>
   <td style="text-align:right;"> 0.1 </td>
   <td style="text-align:right;"> 0.4 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> age </td>
   <td style="text-align:right;"> 33.0 </td>
   <td style="text-align:right;"> 13.3 </td>
   <td style="text-align:right;"> 32.4 </td>
   <td style="text-align:right;"> 12.9 </td>
   <td style="text-align:right;"> 32.8 </td>
   <td style="text-align:right;"> 13.5 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> education_years </td>
   <td style="text-align:right;"> 11.9 </td>
   <td style="text-align:right;"> 3.0 </td>
   <td style="text-align:right;"> 12.1 </td>
   <td style="text-align:right;"> 2.9 </td>
   <td style="text-align:right;"> 11.8 </td>
   <td style="text-align:right;"> 3.1 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> income_family </td>
   <td style="text-align:right;"> 30949.6 </td>
   <td style="text-align:right;"> 17286.8 </td>
   <td style="text-align:right;"> 31603.2 </td>
   <td style="text-align:right;"> 18148.3 </td>
   <td style="text-align:right;"> 30627.0 </td>
   <td style="text-align:right;"> 17201.1 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> hospitalization </td>
   <td style="text-align:right;"> 0.1 </td>
   <td style="text-align:right;"> 0.3 </td>
   <td style="text-align:right;"> 0.1 </td>
   <td style="text-align:right;"> 0.3 </td>
   <td style="text-align:right;"> 0.1 </td>
   <td style="text-align:right;"> 0.3 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> general_health_index </td>
   <td style="text-align:right;"> 69.9 </td>
   <td style="text-align:right;"> 15.0 </td>
   <td style="text-align:right;"> 70.9 </td>
   <td style="text-align:right;"> 14.9 </td>
   <td style="text-align:right;"> 69.6 </td>
   <td style="text-align:right;"> 15.0 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> cholesterol </td>
   <td style="text-align:right;"> 204.1 </td>
   <td style="text-align:right;"> 43.5 </td>
   <td style="text-align:right;"> 207.3 </td>
   <td style="text-align:right;"> 39.9 </td>
   <td style="text-align:right;"> 202.1 </td>
   <td style="text-align:right;"> 44.2 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> blood_pressure </td>
   <td style="text-align:right;"> 123.7 </td>
   <td style="text-align:right;"> 16.6 </td>
   <td style="text-align:right;"> 122.3 </td>
   <td style="text-align:right;"> 16.5 </td>
   <td style="text-align:right;"> 123.5 </td>
   <td style="text-align:right;"> 16.3 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> mental_health_index </td>
   <td style="text-align:right;"> 74.6 </td>
   <td style="text-align:right;"> 13.8 </td>
   <td style="text-align:right;"> 73.8 </td>
   <td style="text-align:right;"> 14.3 </td>
   <td style="text-align:right;"> 74.7 </td>
   <td style="text-align:right;"> 13.9 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> plan_type_2 </td>
   <td style="text-align:right;"> 1.0 </td>
   <td style="text-align:right;"> 0.0 </td>
   <td style="text-align:right;"> 0.0 </td>
   <td style="text-align:right;"> 0.0 </td>
   <td style="text-align:right;"> 2.0 </td>
   <td style="text-align:right;"> 0.0 </td>
  </tr>
</tbody>
</table>

</div>
</div>
<p>Filter two insurance plans to compare means between those.</p>
<div class="cell">

</div>
<p>Filter other two insurance plans and compare means between them.</p>
<div class="cell">

</div>
</section>
<section id="mean-comparison-with-regression" class="level3">
<h3 class="anchored" data-anchor-id="mean-comparison-with-regression">Mean comparison with regression</h3>
<p>Regression analysis could be used to compare means. For example:</p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1"></a>mod1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(income_family <span class="sc">~</span> plan, <span class="at">data =</span> pre_dta)</span>
<span id="cb29-2"><a href="#cb29-2"></a><span class="fu">summary</span>(mod1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = income_family ~ plan, data = pre_dta)

Residuals:
   Min     1Q Median     3Q    Max 
-31603 -13695  -1248  11376  57529 

Coefficients:
                 Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)       30949.6      316.2  97.888   &lt;2e-16 ***
planCatastrophic    653.6      722.8   0.904    0.366    
planFree           -322.6      588.3  -0.548    0.584    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 17390 on 4968 degrees of freedom
  (281 observations deleted due to missingness)
Multiple R-squared:  0.0002879, Adjusted R-squared:  -0.0001146 
F-statistic: 0.7153 on 2 and 4968 DF,  p-value: 0.4891</code></pre>
</div>
</div>
</section>
</section>
<section id="causal-effects" class="level2">
<h2 class="anchored" data-anchor-id="causal-effects">Causal effects</h2>
<p>To study causal effects, we will use a new data set, which loaded before called: <code>post_dta</code>.</p>
<p>Glimpse at it:</p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1"></a><span class="fu">glimpse</span>(post_dta)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 23,927
Columns: 9
$ person         &lt;chr&gt; "MA250247", "MA250247", "MA250247", "MA250247", "MA2502…
$ plan           &lt;chr&gt; "Free", "Free", "Free", "Free", "Free", "Free", "Free",…
$ year           &lt;dbl&gt; 1975, 1976, 1977, 1978, 1979, 1975, 1976, 1977, 1978, 1…
$ total_exp      &lt;dbl&gt; 36.3055, 275.2085, 0.0000, 0.0000, 0.0000, 0.0000, 0.00…
$ outpatient_exp &lt;dbl&gt; 36.3055, 275.2085, 0.0000, 0.0000, 0.0000, 0.0000, 0.00…
$ inpatient_exp  &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ admissions     &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ face_to_face   &lt;dbl&gt; 0, 4, 0, 0, 0, 0, 0, 1, 0, 0, 0, 2, 0, 0, 0, 7, 4, 0, 0…
$ plan_type_2    &lt;dbl&gt; 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2…</code></pre>
</div>
</div>
<section id="t-test" class="level3">
<h3 class="anchored" data-anchor-id="t-test">t-test</h3>
<p>Use the t-test to show the effect of insurance on total expenditure on healthcare.</p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1"></a><span class="fu">t.test</span>(total_exp <span class="sc">~</span> plan, <span class="at">data =</span> post_dta <span class="sc">%&gt;%</span> <span class="fu">filter</span>(plan_type_2 <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">2</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
    Welch Two Sample t-test

data:  total_exp by plan
t = 5.2034, df = 8692, p-value = 2.001e-07
alternative hypothesis: true difference in means between group Catastrophic and group Free is not equal to 0
95 percent confidence interval:
 177.8311 392.8013
sample estimates:
mean in group Catastrophic         mean in group Free 
                  921.0358                   635.7196 </code></pre>
</div>
</div>
</section>
<section id="use-datasummary_balance-for-the-same-comparison" class="level3">
<h3 class="anchored" data-anchor-id="use-datasummary_balance-for-the-same-comparison">Use <code>datasummary_balance()</code> for the same comparison</h3>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1"></a><span class="fu">datasummary_balance</span>(. <span class="sc">~</span> plan, <span class="at">data =</span> post_dta <span class="sc">%&gt;%</span> <span class="fu">filter</span>(plan_type_2 <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">2</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
<tr>
<th style="empty-cells: hide;border-bottom:hidden;" colspan="1"></th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2"><div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">Catastrophic (N=6840)</div></th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2"><div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">Free (N=3724)</div></th>
<th style="empty-cells: hide;border-bottom:hidden;" colspan="2"></th>
</tr>
  <tr>
   <th style="text-align:left;">   </th>
   <th style="text-align:right;"> Mean </th>
   <th style="text-align:right;"> Std. Dev. </th>
   <th style="text-align:right;"> Mean </th>
   <th style="text-align:right;"> Std. Dev. </th>
   <th style="text-align:right;"> Diff. in Means </th>
   <th style="text-align:right;"> Std. Error </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> year </td>
   <td style="text-align:right;"> 1977.7 </td>
   <td style="text-align:right;"> 1.6 </td>
   <td style="text-align:right;"> 1977.5 </td>
   <td style="text-align:right;"> 1.7 </td>
   <td style="text-align:right;"> -0.2 </td>
   <td style="text-align:right;"> 0.0 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> total_exp </td>
   <td style="text-align:right;"> 921.0 </td>
   <td style="text-align:right;"> 2959.6 </td>
   <td style="text-align:right;"> 635.7 </td>
   <td style="text-align:right;"> 2535.3 </td>
   <td style="text-align:right;"> -285.3 </td>
   <td style="text-align:right;"> 54.8 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> outpatient_exp </td>
   <td style="text-align:right;"> 416.9 </td>
   <td style="text-align:right;"> 620.7 </td>
   <td style="text-align:right;"> 247.8 </td>
   <td style="text-align:right;"> 487.6 </td>
   <td style="text-align:right;"> -169.1 </td>
   <td style="text-align:right;"> 11.0 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> inpatient_exp </td>
   <td style="text-align:right;"> 504.1 </td>
   <td style="text-align:right;"> 2705.5 </td>
   <td style="text-align:right;"> 387.9 </td>
   <td style="text-align:right;"> 2308.1 </td>
   <td style="text-align:right;"> -116.2 </td>
   <td style="text-align:right;"> 50.0 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> admissions </td>
   <td style="text-align:right;"> 0.1 </td>
   <td style="text-align:right;"> 0.4 </td>
   <td style="text-align:right;"> 0.1 </td>
   <td style="text-align:right;"> 0.4 </td>
   <td style="text-align:right;"> 0.0 </td>
   <td style="text-align:right;"> 0.0 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> face_to_face </td>
   <td style="text-align:right;"> 4.4 </td>
   <td style="text-align:right;"> 7.4 </td>
   <td style="text-align:right;"> 2.8 </td>
   <td style="text-align:right;"> 5.5 </td>
   <td style="text-align:right;"> -1.7 </td>
   <td style="text-align:right;"> 0.1 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> plan_type_2 </td>
   <td style="text-align:right;"> 0.0 </td>
   <td style="text-align:right;"> 0.0 </td>
   <td style="text-align:right;"> 2.0 </td>
   <td style="text-align:right;"> 0.0 </td>
   <td style="text-align:right;"> 2.0 </td>
   <td style="text-align:right;"> 0.0 </td>
  </tr>
</tbody>
</table>

</div>
</div>


<!-- -->

</section>
</section>

</main> <!-- /main -->

<script>
  // htmlwidgets need to know to resize themselves when slides are shown/hidden.
  // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
  // slide changes (different for each slide format).
  (function () {
    function fireSlideChanged(previousSlide, currentSlide) {

      // dispatch for htmlwidgets
      const event = window.document.createEvent("Event");
      event.initEvent("slideenter", true, true);
      window.document.dispatchEvent(event);

      // dispatch for shiny
      if (window.jQuery) {
        if (previousSlide) {
          window.jQuery(previousSlide).trigger("hidden");
        }
        if (currentSlide) {
          window.jQuery(currentSlide).trigger("shown");
        }
      }
    }

    // hookup for reveal
    if (window.Reveal) {
      window.Reveal.addEventListener("slidechanged", function(event) {
        fireSlideChanged(event.previousSlide, event.currentSlide);
      });
    }

    // hookup for slidy
    if (window.w3c_slidy) {
      window.w3c_slidy.add_observer(function (slide_num) {
        // slide_num starts at position 1
        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
      });
    }

  })();
</script>

<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb36" data-shortcodes="false"><pre class="sourceCode numberSource markdown number-lines code-with-copy"><code class="sourceCode markdown"><span id="cb36-1"><a href="#cb36-1"></a><span class="co">---</span></span>
<span id="cb36-2"><a href="#cb36-2"></a><span class="an">title:</span><span class="co"> "Exploratory analysis of the RAND Health Insurance Experiment (HIE) data"</span></span>
<span id="cb36-3"><a href="#cb36-3"></a><span class="an">author:</span><span class="co"> "EB"</span></span>
<span id="cb36-4"><a href="#cb36-4"></a><span class="an">date:</span><span class="co"> "`r Sys.Date()`"</span></span>
<span id="cb36-5"><a href="#cb36-5"></a><span class="an">output:</span><span class="co"> html_document</span></span>
<span id="cb36-6"><a href="#cb36-6"></a><span class="co">---</span></span>
<span id="cb36-7"><a href="#cb36-7"></a></span>
<span id="cb36-8"><a href="#cb36-8"></a><span class="in">```{r setup, include=FALSE}</span></span>
<span id="cb36-9"><a href="#cb36-9"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">echo =</span> <span class="cn">TRUE</span>)</span>
<span id="cb36-10"><a href="#cb36-10"></a><span class="in">```</span></span>
<span id="cb36-11"><a href="#cb36-11"></a></span>
<span id="cb36-12"><a href="#cb36-12"></a><span class="fu">## Introduction</span></span>
<span id="cb36-13"><a href="#cb36-13"></a></span>
<span id="cb36-14"><a href="#cb36-14"></a>The RAND Health Insurance Experiment (HIE), which ran from 1974 to 1982, was one of the most influential social experiments in research history. It's purpose was to evaluate the price elasticity of the health insurance plans. The HIE enrolled 3,958 people aged 14 to 61 from six areas of the USA. The results of this randomized experiment could be used for evaluating the causal effect of the health insurance on peoples health.</span>
<span id="cb36-15"><a href="#cb36-15"></a></span>
<span id="cb36-16"><a href="#cb36-16"></a>Data that we are using in greater details is described in the Chapter 1. Randomized Trials in <span class="co">[</span><span class="ot">Angrist, J. D., &amp; Pischke, J.-S. (2014). Mastering'metrics: The path from cause to effect. Princeton University Press.</span><span class="co">](https://hds.hebis.de/ubgi/Record/HEB35797798X)</span>. For our exercise, we use a somehow simplified data set with only two distinct insurance plans:</span>
<span id="cb36-17"><a href="#cb36-17"></a></span>
<span id="cb36-18"><a href="#cb36-18"></a><span class="ss">1.  </span>Catastrophic - Analogy of having no insurance</span>
<span id="cb36-19"><a href="#cb36-19"></a><span class="ss">2.  </span>Free - the most comprehensive insurance plan that allows practically any medical treatment for free.</span>
<span id="cb36-20"><a href="#cb36-20"></a></span>
<span id="cb36-21"><a href="#cb36-21"></a>The question that we want to answer is about the causal effect of insurance of enrolled people health.</span>
<span id="cb36-22"><a href="#cb36-22"></a></span>
<span id="cb36-23"><a href="#cb36-23"></a><span class="at">&gt; Note. To better understand the context, read subsection "Randomized results" of the Chapter 1 in Mastering'metrics.</span></span>
<span id="cb36-24"><a href="#cb36-24"></a></span>
<span id="cb36-25"><a href="#cb36-25"></a><span class="fu">### Excersise takaways:</span></span>
<span id="cb36-26"><a href="#cb36-26"></a></span>
<span id="cb36-27"><a href="#cb36-27"></a>These are the key R-related skills showcased in this exercise;</span>
<span id="cb36-28"><a href="#cb36-28"></a></span>
<span id="cb36-29"><a href="#cb36-29"></a><span class="ss">1.  </span>Data wrangling with:</span>
<span id="cb36-30"><a href="#cb36-30"></a></span>
<span id="cb36-31"><a href="#cb36-31"></a><span class="ss">    -   </span><span class="in">`dplyr::filter()`</span>;</span>
<span id="cb36-32"><a href="#cb36-32"></a><span class="ss">    -   </span><span class="in">`dplyr::select()`</span>;</span>
<span id="cb36-33"><a href="#cb36-33"></a></span>
<span id="cb36-34"><a href="#cb36-34"></a><span class="ss">2.  </span>Descriptive statistics: </span>
<span id="cb36-35"><a href="#cb36-35"></a></span>
<span id="cb36-36"><a href="#cb36-36"></a><span class="ss">    -   </span><span class="in">`mean()`</span>, <span class="in">`sd()`</span>;</span>
<span id="cb36-37"><a href="#cb36-37"></a><span class="ss">    -   </span><span class="in">`modelsummary::datasummary_skim()`</span>;</span>
<span id="cb36-38"><a href="#cb36-38"></a></span>
<span id="cb36-39"><a href="#cb36-39"></a><span class="ss">3.  </span>Means comparison:</span>
<span id="cb36-40"><a href="#cb36-40"></a></span>
<span id="cb36-41"><a href="#cb36-41"></a><span class="ss">    -   </span><span class="in">`t.test()`</span>;</span>
<span id="cb36-42"><a href="#cb36-42"></a><span class="ss">    -   </span><span class="in">`modelsummary::datasummary_balance()`</span></span>
<span id="cb36-43"><a href="#cb36-43"></a><span class="ss">    -   </span><span class="in">`lm()`</span> - regression methods</span>
<span id="cb36-44"><a href="#cb36-44"></a></span>
<span id="cb36-45"><a href="#cb36-45"></a><span class="ss">4.  </span>Causal effects analysis:</span>
<span id="cb36-46"><a href="#cb36-46"></a></span>
<span id="cb36-47"><a href="#cb36-47"></a><span class="ss">    -   </span><span class="in">`t.test()`</span>;</span>
<span id="cb36-48"><a href="#cb36-48"></a><span class="ss">    -   </span><span class="in">`modelsummary::datasummary_balance()`</span></span>
<span id="cb36-49"><a href="#cb36-49"></a><span class="ss">    -   </span><span class="in">`lm()`</span></span>
<span id="cb36-50"><a href="#cb36-50"></a></span>
<span id="cb36-51"><a href="#cb36-51"></a></span>
<span id="cb36-52"><a href="#cb36-52"></a><span class="fu">## Loading packages and the data</span></span>
<span id="cb36-53"><a href="#cb36-53"></a></span>
<span id="cb36-54"><a href="#cb36-54"></a>To start working in R, we need to load packages. Sometimes, when we have a fresh new version of R, we need to install libraries before loading them. To install package, one need to run: <span class="in">`install.packages("name_of_the_package")`</span>.</span>
<span id="cb36-55"><a href="#cb36-55"></a></span>
<span id="cb36-58"><a href="#cb36-58"></a><span class="in">```{r}</span></span>
<span id="cb36-59"><a href="#cb36-59"></a><span class="co"># install.packages("psych")   </span></span>
<span id="cb36-60"><a href="#cb36-60"></a><span class="fu">library</span>(psych)</span>
<span id="cb36-61"><a href="#cb36-61"></a></span>
<span id="cb36-62"><a href="#cb36-62"></a><span class="co"># install.packages("tidyverse")</span></span>
<span id="cb36-63"><a href="#cb36-63"></a><span class="fu">library</span>(tidyverse)  </span>
<span id="cb36-64"><a href="#cb36-64"></a></span>
<span id="cb36-65"><a href="#cb36-65"></a><span class="co"># install.packages("modelsummary")</span></span>
<span id="cb36-66"><a href="#cb36-66"></a><span class="fu">library</span>(modelsummary)  </span>
<span id="cb36-67"><a href="#cb36-67"></a></span>
<span id="cb36-68"><a href="#cb36-68"></a><span class="co"># install.packages("GGally")</span></span>
<span id="cb36-69"><a href="#cb36-69"></a><span class="fu">library</span>(GGally)  </span>
<span id="cb36-70"><a href="#cb36-70"></a><span class="in">```</span></span>
<span id="cb36-71"><a href="#cb36-71"></a></span>
<span id="cb36-72"><a href="#cb36-72"></a>Loading data</span>
<span id="cb36-73"><a href="#cb36-73"></a></span>
<span id="cb36-74"><a href="#cb36-74"></a><span class="in">```{r message=FALSE}</span></span>
<span id="cb36-75"><a href="#cb36-75"></a>pre_dta <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"rand-hie-pre-treatment.csv"</span>)</span>
<span id="cb36-76"><a href="#cb36-76"></a>post_dta <span class="ot">&lt;-</span>  <span class="fu">read_csv</span>(<span class="st">"rand-hie-post-treatment.csv"</span>)</span>
<span id="cb36-77"><a href="#cb36-77"></a><span class="in">```</span></span>
<span id="cb36-78"><a href="#cb36-78"></a></span>
<span id="cb36-79"><a href="#cb36-79"></a>Inspecting data:</span>
<span id="cb36-80"><a href="#cb36-80"></a></span>
<span id="cb36-81"><a href="#cb36-81"></a><span class="ss">-   </span><span class="in">`glimpse()`</span> at the data in the console.</span>
<span id="cb36-82"><a href="#cb36-82"></a></span>
<span id="cb36-83"><a href="#cb36-83"></a><span class="fu">## Wrangling basics:</span></span>
<span id="cb36-84"><a href="#cb36-84"></a></span>
<span id="cb36-85"><a href="#cb36-85"></a><span class="in">`dplyr::filter()`</span> - filters observations in the data and <span class="in">`dplyr::selects()`</span> selects variables.</span>
<span id="cb36-86"><a href="#cb36-86"></a></span>
<span id="cb36-87"><a href="#cb36-87"></a>To learn more, do interactive exercise online here:</span>
<span id="cb36-88"><a href="#cb36-88"></a></span>
<span id="cb36-89"><a href="#cb36-89"></a><span class="ss">-   </span><span class="ot">&lt;https://posit.cloud/learn/primers/2.1&gt;</span></span>
<span id="cb36-90"><a href="#cb36-90"></a></span>
<span id="cb36-91"><a href="#cb36-91"></a><span class="ss">-   </span><span class="ot">&lt;https://posit.cloud/learn/primers/2.2&gt;</span></span>
<span id="cb36-92"><a href="#cb36-92"></a></span>
<span id="cb36-93"><a href="#cb36-93"></a>Read: <span class="ot">&lt;https://r4ds.had.co.nz/transform.html&gt;</span></span>
<span id="cb36-94"><a href="#cb36-94"></a></span>
<span id="cb36-95"><a href="#cb36-95"></a><span class="fu">### Filtering data in R</span></span>
<span id="cb36-96"><a href="#cb36-96"></a></span>
<span id="cb36-97"><a href="#cb36-97"></a>Let us filter one intervention only using <span class="in">`dplyr::filter()`</span>.</span>
<span id="cb36-98"><a href="#cb36-98"></a></span>
<span id="cb36-99"><a href="#cb36-99"></a><span class="in">`?filter`</span> - type in the console to get help.</span>
<span id="cb36-100"><a href="#cb36-100"></a></span>
<span id="cb36-101"><a href="#cb36-101"></a>Filter sub samples with a specific insurance plan. Available insurance plans are:</span>
<span id="cb36-102"><a href="#cb36-102"></a></span>
<span id="cb36-103"><a href="#cb36-103"></a><span class="ss">-   </span>"Any insurance"</span>
<span id="cb36-104"><a href="#cb36-104"></a><span class="ss">-   </span>"Catastrophic"</span>
<span id="cb36-105"><a href="#cb36-105"></a><span class="ss">-   </span>"Free"</span>
<span id="cb36-106"><a href="#cb36-106"></a></span>
<span id="cb36-109"><a href="#cb36-109"></a><span class="in">```{r}</span></span>
<span id="cb36-110"><a href="#cb36-110"></a>pre_dta <span class="sc">%&gt;%</span> <span class="fu">filter</span>(plan <span class="sc">==</span> <span class="st">"Catastrophic"</span>)</span>
<span id="cb36-111"><a href="#cb36-111"></a><span class="in">```</span></span>
<span id="cb36-112"><a href="#cb36-112"></a></span>
<span id="cb36-113"><a href="#cb36-113"></a>Filter individuals, where total family income is 10 000 or above.</span>
<span id="cb36-114"><a href="#cb36-114"></a></span>
<span id="cb36-117"><a href="#cb36-117"></a><span class="in">```{r}</span></span>
<span id="cb36-118"><a href="#cb36-118"></a>pre_dta <span class="sc">%&gt;%</span> <span class="fu">filter</span>(income_family <span class="sc">&gt;</span>  <span class="dv">10000</span>)</span>
<span id="cb36-119"><a href="#cb36-119"></a><span class="in">```</span></span>
<span id="cb36-120"><a href="#cb36-120"></a></span>
<span id="cb36-121"><a href="#cb36-121"></a>Count the number of individual under each insurance plan with total expenses above 1000.</span>
<span id="cb36-122"><a href="#cb36-122"></a></span>
<span id="cb36-125"><a href="#cb36-125"></a><span class="in">```{r}</span></span>
<span id="cb36-126"><a href="#cb36-126"></a>pre_dta <span class="sc">%&gt;%</span> <span class="fu">filter</span>(income_family <span class="sc">&gt;</span>  <span class="dv">10000</span>) <span class="sc">%&gt;%</span> <span class="fu">count</span>(plan)</span>
<span id="cb36-127"><a href="#cb36-127"></a><span class="in">```</span></span>
<span id="cb36-128"><a href="#cb36-128"></a></span>
<span id="cb36-129"><a href="#cb36-129"></a><span class="fu">### Selecting data in R</span></span>
<span id="cb36-130"><a href="#cb36-130"></a></span>
<span id="cb36-131"><a href="#cb36-131"></a>Select any set of variables. For example:</span>
<span id="cb36-132"><a href="#cb36-132"></a></span>
<span id="cb36-135"><a href="#cb36-135"></a><span class="in">```{r}</span></span>
<span id="cb36-136"><a href="#cb36-136"></a>pre_dta <span class="sc">%&gt;%</span> <span class="fu">select</span>(female, income_family, age, education_years)</span>
<span id="cb36-137"><a href="#cb36-137"></a><span class="in">```</span></span>
<span id="cb36-138"><a href="#cb36-138"></a></span>
<span id="cb36-139"><a href="#cb36-139"></a>One can specify what variables to drop:</span>
<span id="cb36-140"><a href="#cb36-140"></a></span>
<span id="cb36-143"><a href="#cb36-143"></a><span class="in">```{r}</span></span>
<span id="cb36-144"><a href="#cb36-144"></a>pre_dta <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>plantype, plan_type_2, <span class="sc">-</span>id, <span class="sc">-</span>general_health_index)</span>
<span id="cb36-145"><a href="#cb36-145"></a><span class="in">```</span></span>
<span id="cb36-146"><a href="#cb36-146"></a></span>
<span id="cb36-147"><a href="#cb36-147"></a><span class="fu">### Combine selecting and filtering</span></span>
<span id="cb36-148"><a href="#cb36-148"></a></span>
<span id="cb36-151"><a href="#cb36-151"></a><span class="in">```{r}</span></span>
<span id="cb36-152"><a href="#cb36-152"></a>pre_dta <span class="sc">%&gt;%</span> </span>
<span id="cb36-153"><a href="#cb36-153"></a>  <span class="fu">filter</span>(female <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb36-154"><a href="#cb36-154"></a>  <span class="fu">select</span>(income_family, age, education_years)</span>
<span id="cb36-155"><a href="#cb36-155"></a><span class="in">```</span></span>
<span id="cb36-156"><a href="#cb36-156"></a></span>
<span id="cb36-157"><a href="#cb36-157"></a><span class="fu">## Descriptive statistics</span></span>
<span id="cb36-158"><a href="#cb36-158"></a></span>
<span id="cb36-159"><a href="#cb36-159"></a>There are many ways how to make the descriptive statistics. I like <span class="in">`datasummary`</span></span>
<span id="cb36-160"><a href="#cb36-160"></a></span>
<span id="cb36-161"><a href="#cb36-161"></a><span class="fu">### Tables</span></span>
<span id="cb36-162"><a href="#cb36-162"></a></span>
<span id="cb36-163"><a href="#cb36-163"></a>New function: <span class="in">`datasummary_skim()`</span> from the package <span class="in">`modelsummary`</span>. Check examples in <span class="in">`?datasummary_skim`</span>.</span>
<span id="cb36-164"><a href="#cb36-164"></a></span>
<span id="cb36-167"><a href="#cb36-167"></a><span class="in">```{r}</span></span>
<span id="cb36-168"><a href="#cb36-168"></a><span class="fu">datasummary_skim</span>(pre_dta)</span>
<span id="cb36-169"><a href="#cb36-169"></a><span class="in">```</span></span>
<span id="cb36-170"><a href="#cb36-170"></a></span>
<span id="cb36-171"><a href="#cb36-171"></a>Use <span class="in">`filter()`</span>, <span class="in">`select()`</span> and <span class="in">`datasummary_skim()`</span> to build summary statistics for each insurance plan in the pre-treatment data. Compare those results with the Table 1.3 in the Mastering'metrics book. Make sure that variables <span class="in">`plantype`</span>, <span class="in">`plan_type_2`</span> are not in the summary statistics.</span>
<span id="cb36-172"><a href="#cb36-172"></a></span>
<span id="cb36-175"><a href="#cb36-175"></a><span class="in">```{r}</span></span>
<span id="cb36-176"><a href="#cb36-176"></a>pre_dta <span class="sc">%&gt;%</span> </span>
<span id="cb36-177"><a href="#cb36-177"></a>  <span class="fu">filter</span>(plan <span class="sc">==</span> <span class="st">"Catastrophic"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb36-178"><a href="#cb36-178"></a>  <span class="fu">select</span>(female, age, education_years) <span class="sc">%&gt;%</span> </span>
<span id="cb36-179"><a href="#cb36-179"></a>  <span class="fu">datasummary_skim</span>()</span>
<span id="cb36-180"><a href="#cb36-180"></a><span class="in">```</span></span>
<span id="cb36-181"><a href="#cb36-181"></a></span>
<span id="cb36-182"><a href="#cb36-182"></a><span class="fu">### Complex data summary tables</span></span>
<span id="cb36-183"><a href="#cb36-183"></a></span>
<span id="cb36-184"><a href="#cb36-184"></a>Step 1. Create functions that make summary statistics for us.</span>
<span id="cb36-185"><a href="#cb36-185"></a></span>
<span id="cb36-188"><a href="#cb36-188"></a><span class="in">```{r}</span></span>
<span id="cb36-189"><a href="#cb36-189"></a>mean_na <span class="ot">&lt;-</span> <span class="cf">function</span>(x) <span class="fu">mean</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb36-190"><a href="#cb36-190"></a></span>
<span id="cb36-191"><a href="#cb36-191"></a>sd_na <span class="ot">&lt;-</span> <span class="cf">function</span>(x) <span class="fu">sd</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb36-192"><a href="#cb36-192"></a></span>
<span id="cb36-193"><a href="#cb36-193"></a>min_max <span class="ot">&lt;-</span></span>
<span id="cb36-194"><a href="#cb36-194"></a>  <span class="cf">function</span>(x)  {</span>
<span id="cb36-195"><a href="#cb36-195"></a>    <span class="fu">sprintf</span>(<span class="st">"[%.1f, %.1f]"</span>, <span class="fu">min</span>(x, <span class="at">na.rm =</span> T), <span class="fu">max</span>(x, <span class="at">na.rm =</span> T))</span>
<span id="cb36-196"><a href="#cb36-196"></a>  }</span>
<span id="cb36-197"><a href="#cb36-197"></a><span class="in">```</span></span>
<span id="cb36-198"><a href="#cb36-198"></a></span>
<span id="cb36-199"><a href="#cb36-199"></a>Step 2. Check how these functions work:</span>
<span id="cb36-200"><a href="#cb36-200"></a></span>
<span id="cb36-203"><a href="#cb36-203"></a><span class="in">```{r}</span></span>
<span id="cb36-204"><a href="#cb36-204"></a><span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">120</span>) <span class="sc">%&gt;%</span> mean_na</span>
<span id="cb36-205"><a href="#cb36-205"></a>pre_dta<span class="sc">$</span>age <span class="sc">%&gt;%</span> sd_na</span>
<span id="cb36-206"><a href="#cb36-206"></a>pre_dta<span class="sc">$</span>income_family <span class="sc">%&gt;%</span> min_max</span>
<span id="cb36-207"><a href="#cb36-207"></a><span class="in">```</span></span>
<span id="cb36-208"><a href="#cb36-208"></a></span>
<span id="cb36-209"><a href="#cb36-209"></a>Step 3. Construct a complex summary statistic table using:</span>
<span id="cb36-210"><a href="#cb36-210"></a></span>
<span id="cb36-211"><a href="#cb36-211"></a><span class="ss">-   </span><span class="in">`datasummary()`</span>. help: <span class="in">`?datasummary`</span>. Check the examples.</span>
<span id="cb36-212"><a href="#cb36-212"></a></span>
<span id="cb36-213"><a href="#cb36-213"></a><span class="in">```{r message=FALSE, warning=FALSE}</span></span>
<span id="cb36-214"><a href="#cb36-214"></a><span class="fu">datasummary</span>(<span class="fu">All</span>(pre_dta) <span class="sc">~</span> plan <span class="sc">*</span> (mean_na <span class="sc">+</span> sd_na <span class="sc">+</span> min_max), <span class="at">data =</span> pre_dta)</span>
<span id="cb36-215"><a href="#cb36-215"></a><span class="in">```</span></span>
<span id="cb36-216"><a href="#cb36-216"></a></span>
<span id="cb36-217"><a href="#cb36-217"></a><span class="fu">### Visual summary statistics</span></span>
<span id="cb36-218"><a href="#cb36-218"></a></span>
<span id="cb36-219"><a href="#cb36-219"></a>Here we can use <span class="in">`GGally::ggpair()`</span> more information is here: <span class="ot">&lt;https://ggobi.github.io/ggally/articles/ggpairs.html&gt;</span></span>
<span id="cb36-220"><a href="#cb36-220"></a></span>
<span id="cb36-223"><a href="#cb36-223"></a><span class="in">```{r}</span></span>
<span id="cb36-224"><a href="#cb36-224"></a>pre_dta <span class="sc">%&gt;%</span> </span>
<span id="cb36-225"><a href="#cb36-225"></a>  <span class="fu">select</span>(plan, age, education_years, mental_health_index) <span class="sc">%&gt;%</span> </span>
<span id="cb36-226"><a href="#cb36-226"></a>  GGally<span class="sc">::</span><span class="fu">ggpairs</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">fill =</span> plan)) </span>
<span id="cb36-227"><a href="#cb36-227"></a><span class="in">```</span></span>
<span id="cb36-228"><a href="#cb36-228"></a></span>
<span id="cb36-229"><a href="#cb36-229"></a><span class="fu">## Checks and balances</span></span>
<span id="cb36-230"><a href="#cb36-230"></a></span>
<span id="cb36-231"><a href="#cb36-231"></a><span class="fu">### Means differences between groups</span></span>
<span id="cb36-232"><a href="#cb36-232"></a></span>
<span id="cb36-233"><a href="#cb36-233"></a>We can perform means comparison tests one by one for each variable and difference. For example: </span>
<span id="cb36-234"><a href="#cb36-234"></a></span>
<span id="cb36-237"><a href="#cb36-237"></a><span class="in">```{r}</span></span>
<span id="cb36-238"><a href="#cb36-238"></a><span class="fu">t.test</span>(income_family <span class="sc">~</span> plan, <span class="at">data =</span> pre_dta <span class="sc">%&gt;%</span> <span class="fu">filter</span>(plan_type_2 <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>)))</span>
<span id="cb36-239"><a href="#cb36-239"></a><span class="in">```</span></span>
<span id="cb36-240"><a href="#cb36-240"></a></span>
<span id="cb36-241"><a href="#cb36-241"></a>Make a similar comparison for a different plan type:</span>
<span id="cb36-242"><a href="#cb36-242"></a></span>
<span id="cb36-245"><a href="#cb36-245"></a><span class="in">```{r}</span></span>
<span id="cb36-246"><a href="#cb36-246"></a><span class="in">```</span></span>
<span id="cb36-247"><a href="#cb36-247"></a></span>
<span id="cb36-248"><a href="#cb36-248"></a>Make a similar comparison for a different outcome variable:</span>
<span id="cb36-249"><a href="#cb36-249"></a></span>
<span id="cb36-252"><a href="#cb36-252"></a><span class="in">```{r}</span></span>
<span id="cb36-253"><a href="#cb36-253"></a><span class="in">```</span></span>
<span id="cb36-254"><a href="#cb36-254"></a></span>
<span id="cb36-255"><a href="#cb36-255"></a><span class="fu">### Checks and balances tables</span></span>
<span id="cb36-256"><a href="#cb36-256"></a></span>
<span id="cb36-257"><a href="#cb36-257"></a><span class="in">`datasummary_balance()`</span> is a more sophisticated function. It builds summary statistics for multiple groups and for two groups only it permits comparing means. For help, see <span class="in">`?datasummary_balance`</span>.</span>
<span id="cb36-258"><a href="#cb36-258"></a></span>
<span id="cb36-259"><a href="#cb36-259"></a>Compare leans for all variables across all insurances.</span>
<span id="cb36-260"><a href="#cb36-260"></a></span>
<span id="cb36-263"><a href="#cb36-263"></a><span class="in">```{r}</span></span>
<span id="cb36-264"><a href="#cb36-264"></a><span class="fu">datasummary_balance</span>(. <span class="sc">~</span> plan, <span class="at">data =</span> pre_dta)</span>
<span id="cb36-265"><a href="#cb36-265"></a><span class="in">```</span></span>
<span id="cb36-266"><a href="#cb36-266"></a></span>
<span id="cb36-267"><a href="#cb36-267"></a>Filter two insurance plans to compare means between those. </span>
<span id="cb36-268"><a href="#cb36-268"></a></span>
<span id="cb36-271"><a href="#cb36-271"></a><span class="in">```{r}</span></span>
<span id="cb36-272"><a href="#cb36-272"></a><span class="in">```</span></span>
<span id="cb36-273"><a href="#cb36-273"></a></span>
<span id="cb36-274"><a href="#cb36-274"></a>Filter other two insurance plans and compare means between them.</span>
<span id="cb36-275"><a href="#cb36-275"></a></span>
<span id="cb36-278"><a href="#cb36-278"></a><span class="in">```{r}</span></span>
<span id="cb36-279"><a href="#cb36-279"></a><span class="in">```</span></span>
<span id="cb36-280"><a href="#cb36-280"></a></span>
<span id="cb36-281"><a href="#cb36-281"></a><span class="fu">### Mean comparison with regression</span></span>
<span id="cb36-282"><a href="#cb36-282"></a></span>
<span id="cb36-283"><a href="#cb36-283"></a>Regression analysis could be used to compare means. For example:</span>
<span id="cb36-284"><a href="#cb36-284"></a></span>
<span id="cb36-287"><a href="#cb36-287"></a><span class="in">```{r}</span></span>
<span id="cb36-288"><a href="#cb36-288"></a>mod1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(income_family <span class="sc">~</span> plan, <span class="at">data =</span> pre_dta)</span>
<span id="cb36-289"><a href="#cb36-289"></a><span class="fu">summary</span>(mod1)</span>
<span id="cb36-290"><a href="#cb36-290"></a><span class="in">```</span></span>
<span id="cb36-291"><a href="#cb36-291"></a></span>
<span id="cb36-292"><a href="#cb36-292"></a><span class="fu">## Causal effects</span></span>
<span id="cb36-293"><a href="#cb36-293"></a></span>
<span id="cb36-294"><a href="#cb36-294"></a>To study causal effects, we will use a new data set, which loaded before called: <span class="in">`post_dta`</span>. </span>
<span id="cb36-295"><a href="#cb36-295"></a></span>
<span id="cb36-296"><a href="#cb36-296"></a>Glimpse at it: </span>
<span id="cb36-297"><a href="#cb36-297"></a></span>
<span id="cb36-300"><a href="#cb36-300"></a><span class="in">```{r}</span></span>
<span id="cb36-301"><a href="#cb36-301"></a><span class="fu">glimpse</span>(post_dta)</span>
<span id="cb36-302"><a href="#cb36-302"></a><span class="in">```</span></span>
<span id="cb36-303"><a href="#cb36-303"></a></span>
<span id="cb36-304"><a href="#cb36-304"></a><span class="fu">### t-test</span></span>
<span id="cb36-305"><a href="#cb36-305"></a></span>
<span id="cb36-306"><a href="#cb36-306"></a>Use the t-test to show the effect of insurance on total expenditure on healthcare. </span>
<span id="cb36-307"><a href="#cb36-307"></a></span>
<span id="cb36-310"><a href="#cb36-310"></a><span class="in">```{r}</span></span>
<span id="cb36-311"><a href="#cb36-311"></a><span class="fu">t.test</span>(total_exp <span class="sc">~</span> plan, <span class="at">data =</span> post_dta <span class="sc">%&gt;%</span> <span class="fu">filter</span>(plan_type_2 <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">2</span>)))</span>
<span id="cb36-312"><a href="#cb36-312"></a><span class="in">```</span></span>
<span id="cb36-313"><a href="#cb36-313"></a></span>
<span id="cb36-314"><a href="#cb36-314"></a><span class="fu">### Use `datasummary_balance()` for the same comparison</span></span>
<span id="cb36-315"><a href="#cb36-315"></a></span>
<span id="cb36-318"><a href="#cb36-318"></a><span class="in">```{r}</span></span>
<span id="cb36-319"><a href="#cb36-319"></a><span class="fu">datasummary_balance</span>(. <span class="sc">~</span> plan, <span class="at">data =</span> post_dta <span class="sc">%&gt;%</span> <span class="fu">filter</span>(plan_type_2 <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">2</span>)))</span>
<span id="cb36-320"><a href="#cb36-320"></a><span class="in">```</span></span>
<span id="cb36-321"><a href="#cb36-321"></a></span>
<span id="cb36-322"><a href="#cb36-322"></a></span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



</body></html>